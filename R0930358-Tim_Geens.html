<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />

    <title>Registratie</title>
</head>

<body>
    <div class="container shadow p-3 mb-5 bg-body rounded my-5">
        <div class="row">
<div class="container form">
<form action="">
            <h1>Registreer</h1>
            <h4>
                Meld je aan bij Anoroc Services, wij beschermen jouw software tegen
                malware!
            </h4>
            <div class="row pt-4">
                <div class="col-6">
                    <label for="voornaam" class="form-label">Voornaam</label>
                    <input type="text" class="form-control" id="voornaam" placeholder="Uw voornaam" />
                </div>
                <div class="col-6">
                    <label for="familieNaam" class="form-label">Naam</label>
                    <input type="text" class="form-control" id="familieNaam" placeholder="Uw naam" />
                </div>
            </div>
            <div class="row pt-3">
                <div class="col-sm-6">
                    <label for="Gebruikersnaam" class="form-label">Gebruikersnaam</label>
                    <div class="input-group mb-3">
                        <span class="input-group-text" id="basic-addon1">@</span>
                        <input type="text" class="form-control" id="gebruikersnaam" placeholder="u911236"
                            aria-label="Username" aria-describedby="basic-addon1" />
                    </div>
                </div>
                <div class="col-sm-6">
                    <label for="emailAdres" class="form-label">Emailadres</label>
                    <input type="email" class="form-control" id="emailAdres" placeholder="mail@example.be" />
                </div>
            </div>
            <div class="row pt-2">
                <div class="col-sm-6">
                    <label for="wachtwoord" class="form-label">Wachtwoord</label>
                    <input type="password" class="form-control" id="wachtwoord" aria-describedby="passwordInfo" />
                    <div id="passwordInfo" class="form-text">Je wachtwoord moet minstens 8 tekens lang zijn.</div>
                </div>
                <div class="col-sm-6">
                    <label for="wachtwoordHerhaal" class="form-label">Herhaal wachtwoord</label>
                    <input type="password" class="form-control" id="wachtwoordHerhaal" />
                </div>
            </div>
            <div class="row pt-3">
                <div class="col">
                    <label for="adres" class="form-label">Adres</label>
                    <input type="text" class="form-control" id="adres" placeholder="Uw adres en huisnummer" />
                </div>
            </div>
            <div class="row pt-3">
                <div class="col-sm-5">
                    <label for="land" class="form-label">Land</label>
                    <select class="form-select" id="land" aria-label="Default select example">
                        <option selected>Kies een land</option>
                        <option value="1">BelgiÃ«</option>
                        <option value="2">Nederland</option>
                        <option value="3">Frankrijk</option>
                        <option value="4">Duitsland</option>
                      </select>
                </div>
                <div class="col-sm-4">
                    <label for="provincie" class="form-label">Provincie</label>
                    <select class="form-select" id="provincie" aria-label="Default select example">
                        <option selected>Kies een provincie</option>
                        <option value="1">Antwerpen</option>
                        <option value="2">Limburg</option>
                        <option value="3">Oost-Vlaanderen</option>
                      </select>
                </div>
                <div class="col-sm-3">
                    <label for="formGroupExampleInput" class="form-label">Poscode</label>
                    <input type="text" class="form-control" id="formGroupExampleInput" />
                </div>
            </div>
            <div class="pt-4">
                <hr class="divider">
            </div>
            <div class="row pt-3">
                <div class="col-sm-6">
                    <h3>Hou me op de hoogte</h3>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="opDeHoogte">
                        <label class="form-check-label" for="flexCheckDefault">
                          Inschrijven voor onze nieuwsbrief
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="voorwaarden">
                        <label class="form-check-label" for="flexCheckDefault">
                          Ik ga akkoord met de algemene voorwaarden
                        </label>
                      </div>
                </div>
                <div class="col-sm-6">
                    <h3>Betaling</h3>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="RadioBetalingen" id="bankingApp" value="Banking app" checked>
                        <label class="form-check-label" for="bankingApp">
                          Banking app
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="RadioBetalingen" id="overschrijving" value="Overschrijving">
                        <label class="form-check-label" for="overschrijving">
                          Overschrijving
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="RadioBetalingen" id="visa" value="Visa card">
                        <label class="form-check-label" for="visa">
                          Visa card
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="RadioBetalingen" id="paypal" value="Paypal">
                        <label class="form-check-label" for="paypal">
                          Paypal
                        </label>
                      </div>
                </div>
            </div>
            <div class="pt-3">
                <hr class="divider">
            </div>
            <div class="d-grid gap-2">
                <button class="btn btn-primary mwButton" type="button">Wave your magic wand</button>
              </div>
        </form>
        </div>
        <div class="container meldingen">
            
        </div>
        </div>
    </div>
    <script>
        let errors = []
        document.querySelector('.mwButton').addEventListener('click', validateForm)

        let voornaamField = document.querySelector('#voornaam')
        let familieNaamField = document.querySelector('#familieNaam')
        let gebruikersnaamField = document.querySelector('#gebruikersnaam')
        let emailAdresField = document.querySelector('#emailAdres')
        let wachtwoordField = document.querySelector('#wachtwoord')
        let wachtwoordHerhaalField = document.querySelector('#wachtwoordHerhaal')
        let adresField = document.querySelector('#adres')
        let landField = document.querySelector('#land')
        let provincieField = document.querySelector('#provincie')
        
        function validateForm()
        {
            errors = []
            checkEmptyField(voornaamField, 'Het veld voornaam is vereist')
            checkEmptyField(familieNaamField, 'Het veld naam is vereist')
            checkEmptyField(gebruikersnaamField, 'Het veld gebruikersnaam is vereist')
            checkEmptyField(emailAdresField, 'Het veld email is vereist')

            if(!validateEmail(emailAdresField) && emailAdresField.value != ''){
                errors.push('E-mailaders is niet correct')
            }

            validatePassword(wachtwoordField, wachtwoordHerhaalField)

            checkEmptyField(adresField, 'Adres is vereist')
            checkEmptyField(landField, 'Land is vereist')
            checkEmptyField(provincieField, 'Provincie is vereist')

            changeLayout()
        }

        function checkEmptyField(veld, melding)
        {
            if(veld.value == "" || veld.value == 'Kies een land' || veld.value == 'Kies een provincie')
            {
                errors.push(melding)
            }
        }

        function validateEmail(emailadres)
        {
            //https://www.simplilearn.com/tutorials/javascript-tutorial/email-validation-in-javascript
            let validRegex = /^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-.]+(?:\.[a-zA-Z0-9-]+)*$/


            if(emailadres.value.match(validRegex)){
                //https://www.freecodecamp.org/news/how-to-capitalize-the-first-letter-of-a-string-in-javascript/#:~:text=1.-,Get%20the%20First%20Letter%20of%20the%20String,first%20character%20of%20the%20string.&text=NOTE%3A%20charAt%20is%20preferable%20than,in%20case%20of%20%27%27%5B0%5D%20.
                if(emailadres.value.charAt(0) == '.' || emailadres.value.charAt(0) == '-' 
                || emailadres.value.substring(emailadres.value.indexOf('@') +1, emailadres.value.indexOf('@') +2) == '.' 
                || emailadres.value.substring(emailadres.value.indexOf('@') +1, emailadres.value.indexOf('@') +2) == '-')
                {   
                    return false
                }
                else
                {
                    return true
                }
            }
            else 
            {
                return false
            }
        }

        function validatePassword(paswoord1, paswoord2)
        {
            if(paswoord1.value == '')
            {
                errors.push('Het veld wachtwoord is vereist')
            }

            if(paswoord1.value.length < 8 && paswoord1.value != '')
            {
                errors.push('Het wachtwoord moet uit minimum 8 karakters bestaan')
            }

            if(paswoord2.value == '')
            {
                errors.push('Het veld herhaal wachtwoord is vereist')
            }

            if(paswoord1.value != paswoord2.value && paswoord1.value != '' && paswoord2.value != '')
            {
                errors.push('Je wachtwoorden komen niet overeen')
            }
        }

        function validatePayment()
        {
            //https://www.geeksforgeeks.org/how-to-get-value-of-selected-radio-button-using-javascript/
            var betalingopties = document.getElementsByName('RadioBetalingen')

            for (let i = 0; i < betalingopties.length; i++) {
                if(betalingopties[i].checked)
                {
                    return betalingopties[i].value
                }
            }
        }

        function changeLayout()
        {
            //https://stackoverflow.com/questions/195951/how-can-i-change-an-elements-class-with-javascript
            let form = document.querySelector('.form').classList.add('col-8')

            let meldingenColumn = document.querySelector('.meldingen')

            //we maken de meldingencollumn eerst leeg.
            meldingenColumn.innerHTML = ''

            meldingenColumn.classList.add('col-4')

            let header = document.createElement('h1')
            let header2 = document.createElement('h1')
            let message = document.createElement('p')
            let message2 = document.createElement('p')

            if(errors.length > 0)
            {
                //Aanmaken en invullen van de rode meldingsbox.
                let allertBox = document.createElement('div')
                //https://stackoverflow.com/questions/22133722/javascript-invalidcharactererror-when-modifying-a-css-name-with-a-space
                allertBox.classList.add('alert', 'alert-danger')
                //https://stackoverflow.com/questions/68470335/role-value-with-dom-javascript
                allertBox.setAttribute('role', 'alert')
                meldingenColumn.appendChild(allertBox)
                allertBox.appendChild(header)
                allertBox.appendChild(message)

                header.innerHTML = 'Yikes, errors..'

                for (let index = 0; index < errors.length; index++) {
                    message.innerHTML += errors[index] + '<br>'
                }
            }
            else
            {
                //Aanmaken en invullen can de groene meldingsbox.
                let allertBox = document.createElement('div')
                allertBox.classList.add('alert', 'alert-success')
                allertBox.setAttribute('role', 'alert')
                meldingenColumn.appendChild(allertBox)
                allertBox.appendChild(header)
                allertBox.appendChild(message)

                header.innerHTML = 'Goed gedaan!'
                message.innerHTML = 'Aww yeah, je werd geregistreerd'

                //Aanmaken en invullen can de blauwe meldingsbox.
                let paymentBox = document.createElement('div')
                paymentBox.classList.add('alert', 'alert-info')
                paymentBox.setAttribute('role', 'alert')
                meldingenColumn.appendChild(paymentBox)
                paymentBox.appendChild(header2)
                paymentBox.appendChild(message2)

                header2.innerHTML = 'Betalingswijze'
                message2.innerHTML = 'je betalingswijze is ' + validatePayment()
            }
        }
    </script>

    <script src="js/bootstrap.bundle.min.js"></script>
</body>

</html>